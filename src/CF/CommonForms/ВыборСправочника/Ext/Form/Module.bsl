// sza151207-2352
// sza150522-0246 
// sza140723-2208

&НаКлиенте
Процедура Пользователи(Команда)
	ОткрытьФорму("Справочник.Пользователи.ФормаСписка");	
КонецПроцедуры

&НаКлиенте
Процедура ПослеИзображенияОкнаФормы()	
	ЭтаФорма.Элементы.ФормаЗакрыть.Видимость = НЕ ЭтаФорма.Окно = Неопределено;	
КонецПроцедуры

&НаКлиенте
Процедура ПриЗакрытии()
	ОбщийМодульКлиент.СобытиеФормы(ЭтаФорма, 1);
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	ОбщийМодульКлиент.СобытиеФормы(ЭтаФорма, 0);
	
	ПодключитьОбработчикОжидания("ПослеИзображенияОкнаФормы", 0.3, ИСТИНА);	
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ОбщийМодульПовтор.ПолучитьЗначениеНастройкиИлиКонстанты("ИспользоватьСобственныйПереводЭлементовИнтерфейса") Тогда
		ОбщийМодульСервер.ПеревестиРеквизитыФормы(ЭтаФорма);	
	КонецЕсли;
	
	Если ОбщийМодульПовтор.ПолучитьЗначениеНастройкиИлиКонстанты("ИспользоватьРегионыДляУчетаСтранАЛокацииГородов") Тогда
		Элементы.СправочникРегионыОткрытьСписок.Заголовок = ОбщийМодульПовтор.ПолучитьТекстНаЯзыке("Справочник Стран");
		Элементы.СправочникЛокацииОткрытьСписок.Заголовок = ОбщийМодульПовтор.ПолучитьТекстНаЯзыке("Справочник Городов");
	Иначе
		Элементы.СправочникРегионыОткрытьСписок.Заголовок = ОбщийМодульПовтор.ПолучитьТекстНаЯзыке("Регионы");
		Элементы.СправочникЛокацииОткрытьСписок.Заголовок = ОбщийМодульПовтор.ПолучитьТекстНаЯзыке("Локации");
	КонецЕсли;
	
	ПолныеПрава = РольДоступна("ПолныеПрава");
	АдминистраторСистемы = ЛОЖЬ;
	Попытка
		Выполнить(" АдминистраторСистемы = РольДоступна(""АдминистраторСистемы""); ");
	Исключение
	КонецПопытки;
	
	Элементы.Пользователи.Видимость = ПолныеПрава ИЛИ АдминистраторСистемы;
	
КонецПроцедуры
