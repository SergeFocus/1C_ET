// sza140521-0126
// sza140117-1850 :

&НаКлиенте
Процедура ПриЗакрытии()
	ОбщийМодульКлиент.СобытиеФормы(ЭтаФорма, 1);
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	ОбщийМодульКлиент.СобытиеФормы(ЭтаФорма, 0);
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если НЕ Отказ Тогда
		Если ОбщийМодульПовтор.ПолучитьЗначениеНастройкиИлиКонстанты("ИспользоватьСобственныйПереводЭлементовИнтерфейса") Тогда
			ОбщийМодульСервер.ПеревестиРеквизитыФормы(ЭтаФорма);
		КонецЕсли;

		ОбщийМодульСервер.ОбеспечитьСписокОтборов(Список);
		ТипВладельца = Параметры.ТипВладельца;
		Если ЗначениеЗаполнено(ТипВладельца) Тогда
			ЭлементОтбора = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
			ЭлементОтбора.ЛевоеЗначение    = Новый ПолеКомпоновкиДанных("ЭтоРеквизитДляОбъекта");
			ЭлементОтбора.ВидСравнения     = ВидСравненияКомпоновкиДанных.Равно;
			ЭлементОтбора.Использование    = ИСТИНА;
			ЭлементОтбора.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
			ЭлементОтбора.ПравоеЗначение   = ТипВладельца;
		КонецЕсли;
	Иначе
		Элементы.ТипВладельца.Видимость = ЛОЖЬ;
		Элементы.ФормаСоздатьДополнительныйРеквизит.Видимость = ЛОЖЬ;
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура СоздатьДополнительныйРеквизит(Команда)

	ПараметрыФормы = Новый Структура("ЭтоРеквизитДляОбъекта", ТипВладельца);
	ОткрытьФорму("Справочник.ДополнительныеРеквизиты.ФормаОбъекта", ПараметрыФормы);

КонецПроцедуры
