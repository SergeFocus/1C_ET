//sza131230-1720 SZA: 
//sza131023-1603 : 

Процедура ПриЗаписи(Отказ)
	
	Если СвязатьОдноименнуюГруппуНоменклатуры Тогда
		
		Запрос = Новый Запрос;
		Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1 Номенклатура.Ссылка, Номенклатура.ПометкаУдаления КАК ПометкаУдаления
		               |ИЗ Справочник.Номенклатура КАК Номенклатура
		               |ГДЕ Номенклатура.ЭтоГруппа = ИСТИНА И Номенклатура.Наименование = &Наименование
		               |УПОРЯДОЧИТЬ ПО ПометкаУдаления";
		
		Запрос.УстановитьПараметр("Наименование", Наименование);
		
		РезультатЗапроса = Запрос.Выполнить();
		если не РезультатЗапроса.Пустой() тогда
//			ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
//			ВыборкаДетальныеЗаписи.Следующий();
			
		иначе			
			ОдноименнуюГруппуНоменклатуры = Справочники.Номенклатура.СоздатьГруппу() ;
			ОдноименнуюГруппуНоменклатуры.Наименование = Наименование;
			ОдноименнуюГруппуНоменклатуры.Записать();
			
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ)  	
	Отказ = ОбщийМодульСервер.ПроверитьУникальностьНаименование(Отказ, "НоменклатурныеГруппы", ЭтотОбъект.Наименование, ЭтотОбъект.Ссылка);
КонецПроцедуры

Процедура ПриКопировании(ОбъектКопирования)
	ЭтотОбъект.комментарий = "";
КонецПроцедуры

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)
	//{{__КОНСТРУКТОР_ВВОД_НА_ОСНОВАНИИ
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
	Если ТипЗнч(ДанныеЗаполнения) = Тип("СправочникСсылка.Производители") Тогда
		// Заполнение шапки
		Комментарий = ДанныеЗаполнения.Комментарий;
		Наименование = ДанныеЗаполнения.Наименование;
	ИначеЕсли ТипЗнч(ДанныеЗаполнения) = Тип("СправочникСсылка.Склады") Тогда
		// Заполнение шапки
		Комментарий = ДанныеЗаполнения.Комментарий;
		Наименование = ДанныеЗаполнения.Наименование;
	КонецЕсли;
	//}}__КОНСТРУКТОР_ВВОД_НА_ОСНОВАНИИ
КонецПроцедуры
