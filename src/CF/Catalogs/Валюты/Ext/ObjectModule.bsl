//sza140613-1324 : 
//sza140210-0409 

Процедура ПередЗаписью(Отказ)
	
	Если НЕ Отказ 
		И Не ПометкаУдаления Тогда
		
		ОбщийМодульСервер.ПроверитьСменуНаименованияНаТекущемЯзыке(Наименование, Ссылка, , Отказ);	
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриКопировании(ОбъектКопирования)
	Комментарий = "";
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
	Если НЕ ОбщийМодульПовтор.получитьЗначениеНастройкиИлиКонстанты("ВестиУчетДенегВНесколькихХранилищах") 
		И НЕ Предопределенный Тогда
		
		Запрос = Новый Запрос;
		Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1 ХранилищаДенег.Ссылка
		|ИЗ Справочник.ХранилищаДенег КАК ХранилищаДенег
		|ГДЕ ХранилищаДенег.Валюта = &Валюта";
		
		Запрос.УстановитьПараметр("Валюта", Ссылка);
		
		РезультатЗапроса = Запрос.Выполнить();
		Если РезультатЗапроса.Пустой() Тогда
			
			Попытка
				НовоеХранилищеДенег = Справочники.ХранилищаДенег.СоздатьЭлемент();
				НовоеХранилищеДенег.Валюта = Ссылка;
				НовоеХранилищеДенег.Наименование = ОбщийМодульПовтор.ПолучитьТекстНаЯзыке("Основное в валюте") + " " + Наименование;
				НовоеХранилищеДенег.Записать();
			Исключение
			КонецПопытки;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры
